[core]
# Auth Manager 설정 (FAB 사용)
auth_manager = airflow.providers.fab.auth_manager.fab_auth_manager.FabAuthManager

# 한국 타임존 설정
default_timezone = Asia/Seoul

# DAG 설정
dags_are_paused_at_creation = True
load_examples = False

# 병렬 처리 설정
parallelism = 32
# DAG당 최대 16개 작업
max_active_tasks_per_dag = 16
max_active_runs_per_dag = 16

# 재시도 설정
default_task_retries = 3
default_task_retry_delay = 300

# DAG 파싱 및 태스크 큐 타임아웃 설정
dagbag_import_timeout = 120
task_queued_timeout = 300

[database]
# PostgreSQL 연결 (docker-compose.yml에서 환경변수로 오버라이드됨)
sql_alchemy_conn = postgresql+psycopg2://airflow:airflow@postgres/airflow
sql_alchemy_pool_enabled = True
sql_alchemy_pool_size = 5
sql_alchemy_max_overflow = 10
sql_alchemy_pool_recycle = 1800
sql_alchemy_pool_pre_ping = True

[scheduler]
# 스케줄러 설정
enable_health_check = True
scheduler_health_check_server_host = 0.0.0.0
scheduler_health_check_server_port = 8974
catchup_by_default = False

[webserver]
# Airflow 3.1.0 국제화 설정
default_ui_timezone = Asia/Seoul

# 웹서버 기본 설정
web_server_host = 0.0.0.0
web_server_port = 8080
base_url = http://localhost:8080

# UI 언어 설정 (Airflow 3.1.0+)
# 지원 언어: ar, de, en, es, fr, it, ja, ko, nl, pl, pt, ru, th, tr, vi, zh, zh_TW
# 기본값은 브라우저 언어를 자동으로 감지
# default_ui_locale = ko

# 테마 설정 (auto는 시스템 설정 따름)
# theme = auto